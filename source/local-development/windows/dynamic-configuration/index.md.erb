---
title: 'Appendix: Collaborative development'
order: 3
description: "Here are some additional ways to configure Test Kitchen."
keywords: '.kitchen.local.yml'
layout: lesson
appendix: true
---
Most Chef users store the <code class="file-path">.kitchen.yml</code> file in source control along with their cookbooks so that other users can also use it to verify their own work. Having the <code class="file-path">.kitchen.yml</code> file readily available can help you add and verify features more quickly, or move to newer platforms.

But you might notice two problems with this approach.

1. Not all users use the same Test Kitchen driver. For example, one user might be using the EC2 driver and another user might be using Hyper-V.
1. The <code class="file-path">.kitchen.yml</code> file can contain sensitive information such as passwords and access credentials.

A common solution is to maintain a version of <code class="file-path">.kitchen.yml</code> that works with the Vagrant driver because the Vagrant driver uses free software and doesn't require passwords or other sensitive information to run.

It's also common to use [dynamic configuration](http://kitchen.ci/docs/getting-started/dynamic-configuration). For example, you can create a file named <code class="file-path">.kitchen.local.yml</code>, which you do not check into source control, that overrides the default configuration with your specific details. The <code class="file-path">.gitignore</code> file that's generated when you run the `chef generate cookbook` command automatically excludes <code class="file-path">.kitchen.local.yml</code> from source control management.

Here's the example configuration for EC2 from this tutorial.

```yaml
# ~/learn-chef/cookbooks/settings_windows/.kitchen.yml
---
driver:
  name: ec2
  aws_ssh_key_id: learnchef
  region: us-west-2
  availability_zone: a
  subnet_id: subnet-eacb348f
  instance_type: m1.small
  image_id: ami-c3b3b1f3
  security_group_ids: ['sg-2d3b3b48']
  retryable_tries: 120

provisioner:
  name: chef_zero

transport:
  ssh_key: C:\Users\LearnChef\.ssh\learnchef.pem

platforms:
  - name: windows-2012r2

suites:
  - name: default
    run_list:
      - recipe[settings_windows::default]
    attributes:
```

You can move all of the information that's specific to your AWS account to <code class="file-path">.kitchen.local.yml</code>, like this.

```yaml
# ~/learn-chef/cookbooks/settings_windows/.kitchen.local.yml
---
driver:
  aws_ssh_key_id: learnchef
  region: us-west-2
  availability_zone: a
  subnet_id: subnet-eacb348f
  image_id: ami-c3b3b1f3
  security_group_ids: ['sg-2d3b3b48']

transport:
  ssh_key: C:\Users\LearnChef\.ssh\learnchef.pem
```

Your <code class="file-path">.kitchen.yml</code> file now contains only the general configuration settings.

```yaml
# ~/learn-chef/cookbooks/settings_windows/.kitchen.yml
---
driver:
  name: ec2
  instance_type: m1.small
  retryable_tries: 120

provisioner:
  name: chef_zero

platforms:
  - name: windows-2012r2

suites:
  - name: default
    run_list:
      - recipe[settings_windows::default]
    attributes:
```

Users are required to create their own <code class="file-path">.kitchen.local.yml</code> file that contains their settings.

Alternatively, you can be more explicit about the required settings by using environment variables. <code class="file-path">.kitchen.yml</code> can contain embedded Ruby (ERB) templates. Using this method, your <code class="file-path">.kitchen.yml</code> file might look like this (here, a <code class="file-path">.kitchen.local.yml</code> file is not required.)

<%= partial 'kitchen-yaml-envvars' %>

Users are required to set these environment variables before running Test Kitchen.

Another common option is to provide the Vagrant configuration in <code class="file-path">.kitchen.yml</code> and a configuration that runs in the cloud in a file named <code class="file-path">.kitchen.cloud.yml</code>. This enables you to provide a standard configuration that runs on Vagrant and an option to test your configuration on one or more cloud providers ([the mysql community cookbook is a good example](https://github.com/chef-cookbooks/mysql/blob/master/.kitchen.cloud.yml)). To run the cloud configuration, set the `KITCHEN_YAML=.kitchen.cloud.yml` environment variable. This tells Test Kitchen to read from that file.
