Recall that the SQL script file looks like this:

```sql
-- ~/learn-chef/cookbooks/awesome_customers_windows/files/default/create-database.sql

USE master;
GO
-- Create the learnchef database.
CREATE DATABASE learnchef;
GO
USE learnchef;
GO
-- Create the customers table.
CREATE TABLE customers(
  id uniqueidentifier NOT NULL DEFAULT newid(),
  PRIMARY KEY(id),
  first_name VARCHAR(64),
  last_name VARCHAR(64),
  email VARCHAR(64)
);
GO
-- Add sample data to the table.
INSERT INTO customers(id, first_name, last_name, email) VALUES(newid(), 'Jane', 'Smith', 'jane.smith@example.com');
INSERT INTO customers(id, first_name, last_name, email) VALUES(newid(), 'Dave', 'Richards', 'dave.richards@example.com');
GO
```

Our `only_if` guard tests only for when the `learnchef` database doesn't exist; it doesn't cover the case where the `customers` table or the sample data doesn't exist. This is fine for learning purposes. In practice, you would need to decide how granular your scripts and your tests need to be. For example, you might break this script into three separate scripts &ndash; one to create the database, one to create the table, and one to create the sample data &ndash; if there is a chance that one component might be changed or removed by some other process.