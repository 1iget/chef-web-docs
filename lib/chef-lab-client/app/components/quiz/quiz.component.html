<div class="quiz">
  <form *ngIf="hasQuiz" (ngSubmit)="onSubmit()" #quizForm="ngForm">
    <h3>Test your knowledge</h3>
    <div *ngFor="let question of questions; let q = index">
      <h5>{{question.question}}</h5>
      <ul>
        <li *ngFor="let choice of question.choices; let c = index"
            [class.right-ans]="submitted && submittedAnswers[q] == c && correctAnswers[q] == c"
            [class.wrong-ans]="submitted && submittedAnswers[q] == c && correctAnswers[q] != c"
        >
          <input id="ans{{q}}Label{{c}}" type="radio" name="ans{{q}}" value="{{c}}" [(ngModel)]="answers[q]" [disabled]="complete" />
          <label for="ans{{q}}Label{{c}}" translate="">{{choice}}</label>
        </li>
      </ul>
    </div>
    <div class="result" *ngIf="submitted && !complete">
      <span>You got {{numCorrect}} out of {{questions.length}} answers right.</span>
    </div>
    <div class="check" *ngIf="!complete">
      <button class="btn btn-secondary" [disabled]="!quizForm.form.valid">
        <span *ngIf="!submitted">Check your answers</span>
        <span *ngIf="submitted" >Try again</span>
      </button>
    </div>
  </form>
  <!-- Commented old implementation for reference-->
  <!--<div class="success-result" *ngIf="isUnitComplete">-->
    <!--<div class="unit-complete" *ngIf="!showSpecialCoaster && !isModuleComplete && !isTrackComplete">-->
      <!--<div class="info">-->
        <!--<p *ngIf="hasQuiz">Way to go! You got {{numCorrect}} out of {{questions.length}} answers right.</p>-->
      <!--</div>-->
    <!--</div>-->
    <!--<div class="coaster-award" *ngIf="showSpecialCoaster">-->
      <!--<div class="coaster-img">-->
        <!--<img src="{{specialCoaster.image_url}}" />-->
      <!--</div>-->
      <!--<div class="info">-->
        <!--<p *ngIf="hasQuiz">Way to go! You got {{numCorrect}} out of {{questions.length}} answers right, completed your first module, and earned a special edition coaster.</p>-->
        <!--<p *ngIf="!hasQuiz">Way to go! You've completed your first module and earned a special edition coaster.</p>-->
      <!--</div>-->
    <!--</div>-->
    <!--<div class="module-complete" *ngIf="isModuleComplete && !isTrackComplete && !showSpecialCoaster">-->
      <!--<div class="coaster-img">-->
        <!--<img src="/assets/images/tracks/complete-stamp.png" />-->
      <!--</div>-->
      <!--<div class="info">-->
        <!--<p *ngIf="hasQuiz">Way to go! You got {{numCorrect}} out of {{questions.length}} answers right and completed the module.</p>-->
        <!--<p *ngIf="!hasQuiz">Way to go! You've completed the module.</p>-->
      <!--</div>-->
    <!--</div>-->
    <!--<div class="track-complete" *ngIf="isTrackComplete">-->
      <!--<div class="coaster-img">-->
        <!--<img src="{{trackCoaster.image_url}}" />-->
      <!--</div>-->
      <!--<div class="info">-->
        <!--<p *ngIf="hasQuiz">Way to go! You got {{numCorrect}} out of {{questions.length}} answers right and completed the track.</p>-->
        <!--<p *ngIf="!hasQuiz">Way to go! You've completed the track.</p>-->
        <!--<ul class="social-icons">-->
          <!--<li><i class="fa fa-google"></i></li>-->
          <!--<li><i class="fa fa-facebook"></i></li>-->
          <!--<li><i class="fa fa-twitter"></i></li>-->
          <!--<li><i class="fa fa-linkedin"></i></li>-->
        <!--</ul>-->
      <!--</div>-->
    <!--</div>-->
  <!--</div>-->
  <!--<user-profile-link></user-profile-link>-->
  <!--Placeholders for success results -->
  <div class="success-result" *ngIf="isUnitComplete">
    <div class="unit-complete" *ngIf="!showSpecialCoaster && !isModuleComplete && !isTrackComplete">
      <div class="info">
        <h3 *ngIf="hasQuiz">Way to go! You got {{numCorrect}} out of {{questions.length}} answers right.</h3>
        <user-profile-link></user-profile-link>
        <ul class="social-icons">
          <li><a class="fa fa-google"></a></li>
          <li><a class="fa fa-facebook"></a></li>
          <li><a class="fa fa-twitter"></a></li>
          <li><a class="fa fa-linkedin"></a></li>
        </ul>
      </div>
    </div>
    <div class="coaster-award" *ngIf="showSpecialCoaster">
      <div class="coaster-img">
        <img src="{{specialCoaster.image_url}}" />
      </div>
      <div class="info">
        <h3 *ngIf="hasQuiz">Way to go! <span>You got {{numCorrect}} out of {{questions.length}} answers right, completed your first module, and earned a special edition coaster.</span></h3>
        <h3 *ngIf="!hasQuiz">Way to go! <span>You've completed your first module and earned a special edition coaster.</span></h3>
        <user-profile-link></user-profile-link>
        <ul class="social-icons">
          <li><a class="fa fa-google"></a></li>
          <li><a class="fa fa-facebook"></a></li>
          <li><a class="fa fa-twitter"></a></li>
          <li><a class="fa fa-linkedin"></a></li>
        </ul>
      </div>
    </div>
    <div class="module-complete" *ngIf="isModuleComplete && !isTrackComplete && !showSpecialCoaster">
      <div class="coaster-img">
        <img src="/assets/images/tracks/complete-stamp.png" />
      </div>
      <div class="info">
        <h3 *ngIf="hasQuiz">Way to go! <span>You got {{numCorrect}} out of {{questions.length}} answers right and completed the module.</span></h3>
        <h3 *ngIf="!hasQuiz">Way to go!<br><span> You've completed the module.</span></h3>
        <user-profile-link></user-profile-link>
        <ul class="social-icons">
          <li><a class="fa fa-google"></a></li>
          <li><a class="fa fa-facebook"></a></li>
          <li><a class="fa fa-twitter"></a></li>
          <li><a class="fa fa-linkedin"></a></li>
        </ul>
      </div>
    </div>
    <div class="track-complete" *ngIf="isTrackComplete">
      <div class="coaster-img">
        <img src="{{trackCoaster.image_url}}" />
      </div>
      <div class="info">
        <h3 *ngIf="hasQuiz">Awesome Sauce! <span>You got {{numCorrect}} out of {{questions.length}} answers right and have completed the track.</span></h3>
        <h3 *ngIf="!hasQuiz">Way to go! <br> <span>You've completed this track.</span></h3>
        <user-profile-link></user-profile-link>
        <ul class="social-icons">
          <li><a class="fa fa-google"></a></li>
          <li><a class="fa fa-facebook"></a></li>
          <li><a class="fa fa-twitter"></a></li>
          <li><a class="fa fa-linkedin"></a></li>
        </ul>
      </div>
    </div>
  </div>
</div>
