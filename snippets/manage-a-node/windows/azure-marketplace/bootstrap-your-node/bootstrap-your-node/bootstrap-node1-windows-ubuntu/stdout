
Waiting for remote response before bootstrap.137.117.53.110 . 
137.117.53.110 Response received.
137.117.53.110 Rendering "C:\Users\chef\AppData\Local\Temp\bootstrap-6334-1480488703.bat" chunk 1 
137.117.53.110 Rendering "C:\Users\chef\AppData\Local\Temp\bootstrap-6334-1480488703.bat" chunk 2 
137.117.53.110 Rendering "C:\Users\chef\AppData\Local\Temp\bootstrap-6334-1480488703.bat" chunk 3 
137.117.53.110 Rendering "C:\Users\chef\AppData\Local\Temp\bootstrap-6334-1480488703.bat" chunk 4 
137.117.53.110 Rendering "C:\Users\chef\AppData\Local\Temp\bootstrap-6334-1480488703.bat" chunk 5 
137.117.53.110 Rendering "C:\Users\chef\AppData\Local\Temp\bootstrap-6334-1480488703.bat" chunk 6 
137.117.53.110 Rendering "C:\Users\chef\AppData\Local\Temp\bootstrap-6334-1480488703.bat" chunk 7 
137.117.53.110 Rendering "C:\Users\chef\AppData\Local\Temp\bootstrap-6334-1480488703.bat" chunk 8 
137.117.53.110 Checking for existing directory "C:\chef"...
137.117.53.110 Existing directory not found, creating.
137.117.53.110 
137.117.53.110 C:\Users\chef>(
137.117.53.110 echo.url = WScript.Arguments.Named("url")  
137.117.53.110  echo.path = WScript.Arguments.Named("path")  
137.117.53.110  echo.proxy = null  
137.117.53.110  echo.'* Vaguely attempt to handle file:// scheme urls by url unescaping and switching all  
137.117.53.110  echo.'* / into .  Also assume that file:/// is a local absolute path and that file://<foo>  
137.117.53.110  echo.'* is possibly a network file path.  
137.117.53.110  echo.If InStr(url, "file://") = 1 Then  
137.117.53.110  echo.url = Unescape(url)  
137.117.53.110  echo.If InStr(url, "file:///") = 1 Then  
137.117.53.110  echo.sourcePath = Mid(url, Len("file:///") + 1)  
137.117.53.110  echo.Else 
137.117.53.110  echo.sourcePath = Mid(url, Len("file:") + 1)  
137.117.53.110  echo.End If  
137.117.53.110  echo.sourcePath = Replace(sourcePath, "/", "\")  
137.117.53.110  echo. 
137.117.53.110  echo.Set objFSO = CreateObject("Scripting.FileSystemObject")  
137.117.53.110  echo.If objFSO.Fileexists(path) Then objFSO.DeleteFile path  
137.117.53.110  echo.objFSO.CopyFile sourcePath, path, true  
137.117.53.110  echo.Set objFSO = Nothing  
137.117.53.110  echo. 
137.117.53.110  echo.Else 
137.117.53.110  echo.Set objXMLHTTP = CreateObject("MSXML2.ServerXMLHTTP")  
137.117.53.110  echo.Set wshShell = CreateObject( "WScript.Shell" )  
137.117.53.110  echo.Set objUserVariables = wshShell.Environment("USER")  
137.117.53.110  echo. 
137.117.53.110  echo.rem http proxy is optional  
137.117.53.110  echo.rem attempt to read from HTTP_PROXY env var first  
137.117.53.110  echo.On Error Resume Next  
137.117.53.110  echo. 
137.117.53.110  echo.If NOT (objUserVariables("HTTP_PROXY") = "") Then  
137.117.53.110  echo.proxy = objUserVariables("HTTP_PROXY")  
137.117.53.110  echo. 
137.117.53.110  echo.rem fall back to named arg  
137.117.53.110  echo.ElseIf NOT (WScript.Arguments.Named("proxy") = "") Then  
137.117.53.110  echo.proxy = WScript.Arguments.Named("proxy")  
137.117.53.110  echo.End If  
137.117.53.110  echo. 
137.117.53.110  echo.If NOT isNull(proxy) Then  
137.117.53.110  echo.rem setProxy method is only available on ServerXMLHTTP 6.0+  
137.117.53.110  echo.Set objXMLHTTP = CreateObject("MSXML2.ServerXMLHTTP.6.0")  
137.117.53.110  echo.objXMLHTTP.setProxy 2, proxy  
137.117.53.110  echo.End If  
137.117.53.110  echo. 
137.117.53.110  echo.On Error Goto 0  
137.117.53.110  echo. 
137.117.53.110  echo.objXMLHTTP.open "GET", url, false  
137.117.53.110  echo.objXMLHTTP.send() 
137.117.53.110  echo.If objXMLHTTP.Status = 200 Then  
137.117.53.110  echo.Set objADOStream = CreateObject("ADODB.Stream")  
137.117.53.110  echo.objADOStream.Open 
137.117.53.110  echo.objADOStream.Type = 1  
137.117.53.110  echo.objADOStream.Write objXMLHTTP.ResponseBody  
137.117.53.110  echo.objADOStream.Position = 0  
137.117.53.110  echo.Set objFSO = Createobject("Scripting.FileSystemObject")  
137.117.53.110  echo.If objFSO.Fileexists(path) Then objFSO.DeleteFile path  
137.117.53.110  echo.Set objFSO = Nothing  
137.117.53.110  echo.objADOStream.SaveToFile path  
137.117.53.110  echo.objADOStream.Close 
137.117.53.110  echo.Set objADOStream = Nothing  
137.117.53.110  echo.End If  
137.117.53.110  echo.Set objXMLHTTP = Nothing  
137.117.53.110  echo.End If 
137.117.53.110 ) 1>C:\chef\wget.vbs 
137.117.53.110 
137.117.53.110 C:\Users\chef>(
137.117.53.110 echo.param( 
137.117.53.110  echo.   [String] $remoteUrl,  
137.117.53.110  echo.   [String] $localPath  
137.117.53.110  echo.) 
137.117.53.110  echo. 
137.117.53.110  echo.$ProxyUrl = $env:http_proxy;  
137.117.53.110  echo.$webClient = new-object System.Net.WebClient;  
137.117.53.110  echo. 
137.117.53.110  echo.if ($ProxyUrl -ne '') {  
137.117.53.110  echo.  $WebProxy = New-Object System.Net.WebProxy($ProxyUrl,$true)  
137.117.53.110  echo.  $WebClient.Proxy = $WebProxy  
137.117.53.110  echo.} 
137.117.53.110  echo. 
137.117.53.110  echo.$webClient.DownloadFile($remoteUrl, $localPath); 
137.117.53.110 ) 1>C:\chef\wget.ps1 
137.117.53.110 
137.117.53.110 C:\Users\chef>(
137.117.53.110  
137.117.53.110   
137.117.53.110  
137.117.53.110 ) 
137.117.53.110 Detected Windows Version 6.2 Build 9200
137.117.53.110 
137.117.53.110 C:\Users\chef>goto Version6.2 
137.117.53.110 
137.117.53.110 C:\Users\chef>goto architecture_select 
137.117.53.110 
137.117.53.110 C:\Users\chef>IF "AMD64" == "x86" IF not defined PROCESSOR_ARCHITEW6432 
137.117.53.110 
137.117.53.110 C:\Users\chef>goto install 
137.117.53.110 Checking for existing downloaded package at "C:\Users\chef\AppData\Local\Temp\chef-client-latest.msi"
137.117.53.110 No existing downloaded packages to delete.
137.117.53.110 Attempting to download client package using PowerShell if available...
137.117.53.110 powershell.exe -ExecutionPolicy Unrestricted -InputFormat None -NoProfile -NonInteractive -File  C:\chef\wget.ps1 "https://www.chef.io/chef/download?p=windows&pv=2012&m=x86_64&DownloadContext=PowerShell&v=12" "C:\Users\chef\AppData\Local\Temp\chef-client-latest.msi"
137.117.53.110 Download via PowerShell succeeded.
137.117.53.110 Installing downloaded client package...
137.117.53.110 
137.117.53.110 C:\Users\chef>msiexec /qn /log "C:\Users\chef\AppData\Local\Temp\chef-client-msi29699.log" /i "C:\Users\chef\AppData\Local\Temp\chef-client-latest.msi" 
137.117.53.110 Successfully installed Chef Client package.
137.117.53.110 Installation completed successfully
137.117.53.110 Writing validation key...
137.117.53.110 Validation key written.
137.117.53.110 
137.117.53.110 C:\Users\chef>mkdir C:\chef\trusted_certs 
137.117.53.110 
137.117.53.110 C:\Users\chef>(
137.117.53.110 echo.-----BEGIN CERTIFICATE-----  
137.117.53.110  echo.MIIEIDCCAwigAwIBAgIBADANBgkqhkiG9w0BAQsFADBsMQswCQYDVQQGEwJVUzEQ 
137.117.53.110  echo.MA4GA1UECgwHWW91Q29ycDETMBEGA1UECwwKT3BlcmF0aW9uczE2MDQGA1UEAwwt 
137.117.53.110  echo.Y2hlZi1zZXJ2ZXItYXp1cmUtMy5lYXN0dXMuY2xvdWRhcHAuYXp1cmUuY29tMB4X 
137.117.53.110  echo.DTE2MTEzMDA0MTkzN1oXDTI2MTEyODA0MTkzN1owbDELMAkGA1UEBhMCVVMxEDAO 
137.117.53.110  echo.BgNVBAoMB1lvdUNvcnAxEzARBgNVBAsMCk9wZXJhdGlvbnMxNjA0BgNVBAMMLWNo 
137.117.53.110  echo.ZWYtc2VydmVyLWF6dXJlLTMuZWFzdHVzLmNsb3VkYXBwLmF6dXJlLmNvbTCCASIw 
137.117.53.110  echo.DQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAPpocl9tGwQrYvIJ9pwkXOZhE6DC 
137.117.53.110  echo.M360bYTsBQAqvbc2bxMqUBIIVLPBQy8Tj0sZt+RGm2H4xVwIeUmfgn40pbdJSZZG 
137.117.53.110  echo.dHVju1iQ4bkHmHQ5J8k2ri7Z4MRa1c+AT4BYi26FPxv6VQM7FEelSjm+bx2SiJs7 
137.117.53.110  echo.t/CwCdbBd4QGtcr7a8Y2BZB1Q2Sy12Z4RDqgEkEOi3X/0bQtq9OvlTYOIPsKeXhO 
137.117.53.110  echo.yA1z524o8FH3Ky8EhyXRih5XeDWj3M0/vmFeYZKKh92Iw4U0o0N59bZu+TPJqCOH 
137.117.53.110  echo.VfLSG0bV5OG4s73CkA6mTwe/N0BiXqdFJqfZg1S3OE7Jrnz6yJdfm07DAdsCAwEA 
137.117.53.110  echo.AaOBzDCByTAPBgNVHRMBAf8EBTADAQH/MB0GA1UdDgQWBBQ9RJ5RTcUVTZhYJqXx 
137.117.53.110  echo.PZUtuQi4ezCBlgYDVR0jBIGOMIGLgBQ9RJ5RTcUVTZhYJqXxPZUtuQi4e6FwpG4w 
137.117.53.110  echo.bDELMAkGA1UEBhMCVVMxEDAOBgNVBAoMB1lvdUNvcnAxEzARBgNVBAsMCk9wZXJh 
137.117.53.110  echo.dGlvbnMxNjA0BgNVBAMMLWNoZWYtc2VydmVyLWF6dXJlLTMuZWFzdHVzLmNsb3Vk 
137.117.53.110  echo.YXBwLmF6dXJlLmNvbYIBADANBgkqhkiG9w0BAQsFAAOCAQEAwDLDe3u4vAAiVL+E 
137.117.53.110  echo.EOdPtf/ZXLaMyyl68sWvLX6LGfaVKw/jvymt0CYh8mFxfue65vRdsHNhIz9b7wGX 
137.117.53.110  echo.o/geX4yVDLa5cxBD6qdmpQk4U40NJa3rnebSHS/jKYzbf90vB3Wha64qT9WYcA7p 
137.117.53.110  echo.G+cg3GT8VQTN49PyPAZISZ7CBUhUngKwoNIzB15+T8qT0xcZmqcXRBESsPjyFS95 
137.117.53.110  echo.JtWxSJ1hZDKLJsFh23gLZNWegE+etag+fqgXIcI1sBpb1KWcNlqIijAb7cnP7Hj4 
137.117.53.110  echo.lyuGuwralizHLlmh8R2AsoSn6mJc3MWALi687sPCAFVByG4NPMiFkSY69WjxcJs5 
137.117.53.110  echo.DLYe5w==  
137.117.53.110  echo.-----END CERTIFICATE----- 
137.117.53.110 ) 1>C:\chef/trusted_certs/chef-server-azure-3_eastus_cloudapp_azure_com.crt 
137.117.53.110 
137.117.53.110 C:\Users\chef>(
137.117.53.110 echo.log_level        :info  
137.117.53.110  echo.log_location     STDOUT  
137.117.53.110  echo. 
137.117.53.110  echo.chef_server_url  "https://chef-server-azure-3.eastus.cloudapp.azure.com/organizations/4thcoffee"  
137.117.53.110  echo.validation_client_name "chef-validator"  
137.117.53.110  echo. 
137.117.53.110  echo.file_cache_path   "c:/chef/cache"  
137.117.53.110  echo.file_backup_path  "c:/chef/backup"  
137.117.53.110  echo.cache_options     ({:path => "c:/chef/cache/checksums", :skip_expires => true})  
137.117.53.110  echo. 
137.117.53.110  echo.node_name "node1-windows"  
137.117.53.110  echo.trusted_certs_dir "c:/chef/trusted_certs" 
137.117.53.110 ) 1>C:\chef\client.rb 
137.117.53.110 
137.117.53.110 C:\Users\chef>(echo.{"run_list":["recipe[learn_chef_iis]"]}) 1>C:\chef\first-boot.json 
137.117.53.110 Starting chef to bootstrap the node...
137.117.53.110 
137.117.53.110 C:\Users\chef>SET "PATH=C:\Windows\system32;C:\Windows;C:\Windows\System32\Wbem;C:\Windows\System32\WindowsPowerShell\v1.0\;C:\ruby\bin;C:\opscode\chef\bin;C:\opscode\chef\embedded\bin" 
137.117.53.110 
137.117.53.110 C:\Users\chef>chef-client -c c:/chef/client.rb -j c:/chef/first-boot.json 
137.117.53.110 [2016-11-30T06:54:00+00:00] INFO: *** Chef 12.16.42 ***
137.117.53.110 [2016-11-30T06:54:00+00:00] INFO: Platform: x64-mingw32
137.117.53.110 [2016-11-30T06:54:00+00:00] INFO: Chef-client pid: 2928
137.117.53.110 [2016-11-30T06:54:38+00:00] INFO: Setting the run_list to ["recipe[learn_chef_iis]"] from CLI options
137.117.53.110 [2016-11-30T06:54:38+00:00] INFO: Run List is [recipe[learn_chef_iis]]
137.117.53.110 [2016-11-30T06:54:38+00:00] INFO: Run List expands to [learn_chef_iis]
137.117.53.110 [2016-11-30T06:54:38+00:00] INFO: Starting Chef Run for node1-windows
137.117.53.110 [2016-11-30T06:54:38+00:00] INFO: Running start handlers
137.117.53.110 [2016-11-30T06:54:38+00:00] INFO: Start handlers complete.
137.117.53.110 [2016-11-30T06:54:38+00:00] INFO: HTTP Request Returned 404 Not Found: 
137.117.53.110 [2016-11-30T06:54:38+00:00] INFO: Error while reporting run start to Data Collector. URL: https://chef-server-azure-3.eastus.cloudapp.azure.com/organizations/4thcoffee/data-collector Exception: 404 -- 404 "Not Found"  (This is normal if you do not have Chef Automate)
137.117.53.110 [2016-11-30T06:54:38+00:00] INFO: Loading cookbooks [learn_chef_iis@0.1.0]
137.117.53.110 [2016-11-30T06:54:39+00:00] INFO: Storing updated cookbooks/learn_chef_iis/templates/Default.htm.erb in the cache.
137.117.53.110 [2016-11-30T06:54:39+00:00] INFO: Storing updated cookbooks/learn_chef_iis/.gitignore in the cache.
137.117.53.110 [2016-11-30T06:54:39+00:00] INFO: Storing updated cookbooks/learn_chef_iis/LICENSE in the cache.
137.117.53.110 [2016-11-30T06:54:39+00:00] INFO: Storing updated cookbooks/learn_chef_iis/.kitchen.yml in the cache.
137.117.53.110 [2016-11-30T06:54:39+00:00] INFO: Storing updated cookbooks/learn_chef_iis/recipes/default.rb in the cache.
137.117.53.110 [2016-11-30T06:54:39+00:00] INFO: Storing updated cookbooks/learn_chef_iis/metadata.rb in the cache.
137.117.53.110 [2016-11-30T06:54:39+00:00] INFO: Storing updated cookbooks/learn_chef_iis/chefignore in the cache.
137.117.53.110 [2016-11-30T06:54:39+00:00] INFO: Storing updated cookbooks/learn_chef_iis/Berksfile in the cache.
137.117.53.110 [2016-11-30T06:54:39+00:00] INFO: Storing updated cookbooks/learn_chef_iis/README.md in the cache.
137.117.53.110 [2016-11-30T06:54:39+00:00] INFO: Processing powershell_script[Install IIS] action run (learn_chef_iis::default line 6)
137.117.53.110 [2016-11-30T06:54:39+00:00] INFO: Processing powershell_script[Guard resource] action run (dynamically defined)
137.117.53.110 [2016-11-30T06:56:22+00:00] INFO: powershell_script[Install IIS] ran successfully
137.117.53.110 [2016-11-30T06:56:22+00:00] INFO: Processing windows_service[w3svc] action enable (learn_chef_iis::default line 12)
137.117.53.110 [2016-11-30T06:56:22+00:00] INFO: Processing windows_service[w3svc] action start (learn_chef_iis::default line 12)
137.117.53.110 [2016-11-30T06:56:22+00:00] INFO: Processing template[c:\inetpub\wwwroot\Default.htm] action create (learn_chef_iis::default line 16)
137.117.53.110 [2016-11-30T06:56:22+00:00] INFO: template[c:\inetpub\wwwroot\Default.htm] created file c:\inetpub\wwwroot\Default.htm
137.117.53.110 [2016-11-30T06:56:22+00:00] INFO: template[c:\inetpub\wwwroot\Default.htm] updated file contents c:\inetpub\wwwroot\Default.htm
137.117.53.110 [2016-11-30T06:56:22+00:00] INFO: Chef Run complete in 104.135051 seconds
137.117.53.110 [2016-11-30T06:56:22+00:00] INFO: Running report handlers
137.117.53.110 [2016-11-30T06:56:22+00:00] INFO: Report handlers complete
137.117.53.110 [2016-11-30T06:56:22+00:00] INFO: Sending resource update report (run-id: 5cc5e67d-c22f-45f4-9df0-eeac64307dd7)