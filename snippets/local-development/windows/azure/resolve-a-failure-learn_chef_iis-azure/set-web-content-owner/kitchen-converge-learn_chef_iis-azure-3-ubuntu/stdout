-----> Starting Kitchen (v1.15.0)
-----> Creating <default-windows-2012r2>...
       Creating Resource Group: kitchen-default-windows-2012r2-20170314T052214
       Creating deployment: deploy-de1bc37c7f90e1f7
       Adding WinRM configuration to provisioning profile.
       Resource Microsoft.Storage/storageAccounts 'storagede1bc37c7f90e1f7' provisioning status is Running
       Resource Microsoft.Storage/storageAccounts 'storagede1bc37c7f90e1f7' provisioning status is Running
       Resource Microsoft.Compute/virtualMachines 'vm' provisioning status is Running
       Resource Microsoft.Compute/virtualMachines 'vm' provisioning status is Running
       Resource Microsoft.Compute/virtualMachines 'vm' provisioning status is Running
       Resource Microsoft.Compute/virtualMachines 'vm' provisioning status is Running
       Resource Microsoft.Compute/virtualMachines 'vm' provisioning status is Running
       Resource Microsoft.Compute/virtualMachines 'vm' provisioning status is Running
       Resource Microsoft.Compute/virtualMachines 'vm' provisioning status is Running
       Resource Microsoft.Compute/virtualMachines 'vm' provisioning status is Running
       Resource Microsoft.Compute/virtualMachines 'vm' provisioning status is Running
       Resource Microsoft.Compute/virtualMachines 'vm' provisioning status is Running
       Resource Microsoft.Compute/virtualMachines 'vm' provisioning status is Running
       Resource Microsoft.Compute/virtualMachines 'vm' provisioning status is Running
       Resource Microsoft.Compute/virtualMachines 'vm' provisioning status is Running
       Resource Microsoft.Compute/virtualMachines 'vm' provisioning status is Running
       Resource Microsoft.Compute/virtualMachines 'vm' provisioning status is Running
       Resource Template deployment reached end state of 'Succeeded'.
       IP Address is: 40.71.192.127 [kitchen-de1bc37c7f90e1f7.eastus.cloudapp.azure.com]
       Finished creating <default-windows-2012r2> (3m30.75s).
-----> Converging <default-windows-2012r2>...
       Preparing files for transfer
       Preparing dna.json
       Resolving cookbook dependencies with Berkshelf 5.6.0...
       Removing non-cookbook files before transfer
       Preparing validation.pem
       Preparing client.rb
-----> Installing Chef Omnibus (install only if missing)
       Downloading package from https://packages.chef.io/files/stable/chef/12.19.36/windows/2012r2/chef-client-12.19.36-1-x64.msi
       Download complete.
       Successfully verified C:\Users\azure\AppData\Local\Temp\chef-client-12.19.36-1-x64.msi
       Installing Chef Omnibus package C:\Users\azure\AppData\Local\Temp\chef-client-12.19.36-1-x64.msi
       Installation complete
       Transferring files to <default-windows-2012r2>
       Starting Chef Client, version 12.19.36
       [2017-03-14T05:27:53+00:00] INFO: *** Chef 12.19.36 ***
       [2017-03-14T05:27:53+00:00] INFO: Platform: x64-mingw32
       [2017-03-14T05:27:53+00:00] INFO: Chef-client pid: 1016
       Creating a new client identity for default-windows-2012r2 using the validator key.
       [2017-03-14T05:28:27+00:00] INFO: Client key C:\Users\azure\AppData\Local\Temp\kitchen\client.pem is not present - registering
       [2017-03-14T05:28:28+00:00] INFO: HTTP Request Returned 404 Not Found: Object not found: chefzero://localhost:8889/nodes/default-windows-2012r2
       [2017-03-14T05:28:28+00:00] INFO: Setting the run_list to ["recipe[learn_chef_iis::default]"] from CLI options
       [2017-03-14T05:28:28+00:00] INFO: Run List is [recipe[learn_chef_iis::default]]
       [2017-03-14T05:28:28+00:00] INFO: Run List expands to [learn_chef_iis::default]
       [2017-03-14T05:28:28+00:00] INFO: Starting Chef Run for default-windows-2012r2
       [2017-03-14T05:28:28+00:00] INFO: Running start handlers
       [2017-03-14T05:28:28+00:00] INFO: Start handlers complete.
       [2017-03-14T05:28:28+00:00] INFO: HTTP Request Returned 404 Not Found: Object not found: 
       resolving cookbooks for run list: ["learn_chef_iis::default"]
       [2017-03-14T05:28:28+00:00] INFO: Loading cookbooks [learn_chef_iis@0.1.0]
       Synchronizing Cookbooks:
       [2017-03-14T05:28:28+00:00] INFO: Storing updated cookbooks/learn_chef_iis/templates/Default.htm.erb in the cache.
       [2017-03-14T05:28:28+00:00] INFO: Storing updated cookbooks/learn_chef_iis/metadata.json in the cache.
       [2017-03-14T05:28:28+00:00] INFO: Storing updated cookbooks/learn_chef_iis/README.md in the cache.
       [2017-03-14T05:28:28+00:00] INFO: Storing updated cookbooks/learn_chef_iis/recipes/default.rb in the cache.
         - learn_chef_iis (0.1.0)
       Installing Cookbook Gems:
       Compiling Cookbooks...
       Converging 4 resources
       Recipe: learn_chef_iis::default
         * powershell_script[Install IIS] action run[2017-03-14T05:28:28+00:00] INFO: Processing powershell_script[Install IIS] action run (learn_chef_iis::default line 6)
       [2017-03-14T05:28:28+00:00] INFO: Processing powershell_script[Guard resource] action run (dynamically defined)
       
           [execute] 
       
              Success Restart Needed Exit Code      Feature Result                           
       
              ------- -------------- ---------      --------------                           
       
              True    No             Success        {Common HTTP Features, Default Documen...
       
       [2017-03-14T05:29:44+00:00] INFO: powershell_script[Install IIS] ran successfully
           - execute "C:\Windows\system32\WindowsPowerShell\v1.0\powershell.exe" -NoLogo -NonInteractive -NoProfile -ExecutionPolicy Bypass -InputFormat None -File "C:/Users/azure/AppData/Local/Temp/chef-script20170314-1016-1ru7aei.ps1"
         * windows_service[w3svc] action enable[2017-03-14T05:29:44+00:00] INFO: Processing windows_service[w3svc] action enable (learn_chef_iis::default line 12)
        (up to date)
         * windows_service[w3svc] action start[2017-03-14T05:29:44+00:00] INFO: Processing windows_service[w3svc] action start (learn_chef_iis::default line 12)
        (up to date)
         * directory[c:\inetpub\wwwroot] action create[2017-03-14T05:29:44+00:00] INFO: Processing directory[c:\inetpub\wwwroot] action create (learn_chef_iis::default line 16)
       
           
           ================================================================================
           Error executing action `create` on resource 'directory[c:\inetpub\wwwroot]'
           ================================================================================
           
           Chef::Exceptions::Win32APIError
           -------------------------------
           No mapping between account names and security IDs was done.
           ---- Begin Win32 API output ----
           System Error Code: 1332
           System Error Message: No mapping between account names and security IDs was done.
           ---- End Win32 API output ----
           
           Resource Declaration:
           ---------------------
           
            16: directory 'c:\inetpub\wwwroot' do
            17:   rights :read, 'IIS_USRS'
            18:   recursive true
            19:   action :create
            20: end
            21: 
           
           Compiled Resource:
           ------------------
           
           directory("c:\inetpub\wwwroot") do
             action [:create]
             retries 0
             retry_delay 2
             default_guard_interpreter :default
             path "c:\\inetpub\\wwwroot"
             recursive true
             declared_type :directory
             cookbook_name "learn_chef_iis"
             recipe_name "default"
             rights [{:permissions=>:read, :principals=>"IIS_USRS"}]
             group nil
             mode nil
             owner nil
           end
           
           Platform:
           ---------
           x64-mingw32
           
       [2017-03-14T05:29:44+00:00] INFO: Running queued delayed notifications before re-raising exception
       
       Running handlers:
       [2017-03-14T05:29:44+00:00] ERROR: Running exception handlers
       Running handlers complete
       [2017-03-14T05:29:44+00:00] ERROR: Exception handlers complete
       Chef Client failed. 1 resources updated in 01 minutes 54 seconds
       [2017-03-14T05:29:44+00:00] FATAL: Stacktrace dumped to C:/Users/azure/AppData/Local/Temp/kitchen/cache/chef-stacktrace.out
       [2017-03-14T05:29:44+00:00] FATAL: Please provide the contents of the stacktrace.out file if you file a bug report
       [2017-03-14T05:29:44+00:00] FATAL: Chef::Exceptions::Win32APIError: directory[c:\inetpub\wwwroot] (learn_chef_iis::default line 16) had an error: Chef::Exceptions::Win32APIError: No mapping between account names and security IDs was done.
       ---- Begin Win32 API output ----
       System Error Code: 1332
       System Error Message: No mapping between account names and security IDs was done.
       ---- End Win32 API output ----
       