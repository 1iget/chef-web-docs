-----> Starting Kitchen (v1.13.2)
-----> Creating <default-windows-2012r2>...
       Detected platform: windows version 2012r2rtm on x86_64. Instance Type: m1.small. Default username: administrator (default).
       If you are not using an account that qualifies under the AWS
free-tier, you may be charged to run these suites. The charge
should be minimal, but neither Test Kitchen nor its maintainers
are responsible for your incurred costs.

       Instance <i-03d478bf497be1985> requested.
       Polling AWS for existence, attempt 0...
       Attempting to tag the instance, 0 retries
       EC2 instance <i-03d478bf497be1985> created.
       Waited 0/600s for instance <i-03d478bf497be1985> to become ready.
       Waited 5/600s for instance <i-03d478bf497be1985> to become ready.
       Waited 10/600s for instance <i-03d478bf497be1985> to become ready.
       Waited 15/600s for instance <i-03d478bf497be1985> to become ready.
       Waited 20/600s for instance <i-03d478bf497be1985> to become ready.
       Waited 25/600s for instance <i-03d478bf497be1985> to become ready.
       Waited 30/600s for instance <i-03d478bf497be1985> to become ready.
       Waited 35/600s for instance <i-03d478bf497be1985> to become ready.
       Waited 40/600s for instance <i-03d478bf497be1985> to become ready.
       Waited 45/600s for instance <i-03d478bf497be1985> to become ready.
       Waited 50/600s for instance <i-03d478bf497be1985> to become ready.
       Waited 55/600s for instance <i-03d478bf497be1985> to become ready.
       Waited 60/600s for instance <i-03d478bf497be1985> to become ready.
       Waited 65/600s for instance <i-03d478bf497be1985> to become ready.
       Waited 70/600s for instance <i-03d478bf497be1985> to become ready.
       Waited 75/600s for instance <i-03d478bf497be1985> to become ready.
       Waited 80/600s for instance <i-03d478bf497be1985> to become ready.
       Waited 85/600s for instance <i-03d478bf497be1985> to become ready.
       Waited 90/600s for instance <i-03d478bf497be1985> to become ready.
       Waited 95/600s for instance <i-03d478bf497be1985> to become ready.
       Waited 100/600s for instance <i-03d478bf497be1985> to become ready.
       Waited 105/600s for instance <i-03d478bf497be1985> to become ready.
       Waited 110/600s for instance <i-03d478bf497be1985> to become ready.
       Waited 115/600s for instance <i-03d478bf497be1985> to become ready.
       Waited 120/600s for instance <i-03d478bf497be1985> to become ready.
       Waited 125/600s for instance <i-03d478bf497be1985> to become ready.
       Waited 130/600s for instance <i-03d478bf497be1985> to become ready.
       Waited 135/600s for instance <i-03d478bf497be1985> to become ready.
       Waited 140/600s for instance <i-03d478bf497be1985> to become ready.
       Waited 145/600s for instance <i-03d478bf497be1985> to become ready.
       Waited 150/600s for instance <i-03d478bf497be1985> to become ready.
       Waited 155/600s for instance <i-03d478bf497be1985> to become ready.
       Waited 160/600s for instance <i-03d478bf497be1985> to become ready.
       Waited 165/600s for instance <i-03d478bf497be1985> to become ready.
       Waited 170/600s for instance <i-03d478bf497be1985> to become ready.
       Waited 175/600s for instance <i-03d478bf497be1985> to become ready.
       Waited 180/600s for instance <i-03d478bf497be1985> to become ready.
       Waited 185/600s for instance <i-03d478bf497be1985> to become ready.
       Waited 190/600s for instance <i-03d478bf497be1985> to become ready.
       Waited 195/600s for instance <i-03d478bf497be1985> to become ready.
       Waited 200/600s for instance <i-03d478bf497be1985> to become ready.
       Waited 205/600s for instance <i-03d478bf497be1985> to become ready.
       Waited 210/600s for instance <i-03d478bf497be1985> to become ready.
       Waited 215/600s for instance <i-03d478bf497be1985> to become ready.
       Waited 220/600s for instance <i-03d478bf497be1985> to become ready.
       Waited 225/600s for instance <i-03d478bf497be1985> to become ready.
       Waited 230/600s for instance <i-03d478bf497be1985> to become ready.
       Waited 235/600s for instance <i-03d478bf497be1985> to become ready.
       Waited 0/600s for instance <i-03d478bf497be1985> to fetch windows admin password.
       Retrieved Windows password for instance <i-03d478bf497be1985>.
       EC2 instance <i-03d478bf497be1985> ready.
       [WinRM] Established
       
       
       
           Directory: C:\chef\ohai\hints
       
       
       Mode                LastWriteTime     Length Name                              
       ----                -------------     ------ ----                              
       -a---         11/2/2016   1:21 PM          0 ec2.json                          
       
       
       Finished creating <default-windows-2012r2> (5m58.58s).
-----> Converging <default-windows-2012r2>...
       Preparing files for transfer
       Preparing dna.json
       Resolving cookbook dependencies with Berkshelf 5.1.0...
       Removing non-cookbook files before transfer
       Preparing validation.pem
       Preparing client.rb
-----> Installing Chef Omnibus (install only if missing)
       Downloading package from https://packages.chef.io/files/stable/chef/12.15.19/windows/2012r2/chef-client-12.15.19-1-x64.msi
       Download complete.
       Successfully verified C:\Users\ADMINI~1\AppData\Local\Temp\chef-client-12.15.19-1-x64.msi
       Installing Chef Omnibus package C:\Users\ADMINI~1\AppData\Local\Temp\chef-client-12.15.19-1-x64.msi
       Installation complete
       Transferring files to <default-windows-2012r2>
       Starting Chef Client, version 12.15.19
       Creating a new client identity for default-windows-2012r2 using the validator key.
       resolving cookbooks for run list: ["learn_chef_iis::default"]
       Synchronizing Cookbooks:
         - learn_chef_iis (0.1.0)
       Installing Cookbook Gems:
       Compiling Cookbooks...
       Converging 4 resources
       Recipe: learn_chef_iis::default
         * powershell_script[Install IIS] action run
           - execute "C:\Windows\system32\WindowsPowerShell\v1.0\powershell.exe" -NoLogo -NonInteractive -NoProfile -ExecutionPolicy Bypass -InputFormat None -File "C:/Users/ADMINI~1/AppData/Local/Temp/chef-script20161102-2484-1drhi35.ps1"
         * windows_service[w3svc] action enable (up to date)
         * windows_service[w3svc] action start (up to date)
         * directory[c:\inetpub\wwwroot] action create
           
           ================================================================================
           Error executing action `create` on resource 'directory[c:\inetpub\wwwroot]'
           ================================================================================
           
           Chef::Exceptions::Win32APIError
           -------------------------------
           No mapping between account names and security IDs was done.
           ---- Begin Win32 API output ----
           System Error Code: 1332
           System Error Message: No mapping between account names and security IDs was done.
           ---- End Win32 API output ----
           
           Resource Declaration:
           ---------------------
           
            16: directory 'c:\inetpub\wwwroot' do
            17:   rights :read, 'IIS_USRS'
            18:   recursive true
            19:   action :create
            20: end
            21: 
           
           Compiled Resource:
           ------------------
           
           directory("c:\inetpub\wwwroot") do
             action [:create]
             retries 0
             retry_delay 2
             default_guard_interpreter :default
             path "c:\\inetpub\\wwwroot"
             recursive true
             declared_type :directory
             cookbook_name "learn_chef_iis"
             recipe_name "default"
             rights [{:permissions=>:read, :principals=>"IIS_USRS"}]
           end
           
           Platform:
           ---------
           x64-mingw32
           
       
       Running handlers:
       [2016-11-02T13:29:48+00:00] ERROR: Running exception handlers
       Running handlers complete
       [2016-11-02T13:29:48+00:00] ERROR: Exception handlers complete
       Chef Client failed. 1 resources updated in 03 minutes 52 seconds
       [2016-11-02T13:29:48+00:00] FATAL: Stacktrace dumped to C:/Users/ADMINI~1/AppData/Local/Temp/kitchen/cache/chef-stacktrace.out
       [2016-11-02T13:29:48+00:00] FATAL: Please provide the contents of the stacktrace.out file if you file a bug report
       [2016-11-02T13:29:48+00:00] FATAL: Chef::Exceptions::Win32APIError: directory[c:\inetpub\wwwroot] (learn_chef_iis::default line 16) had an error: Chef::Exceptions::Win32APIError: No mapping between account names and security IDs was done.
       ---- Begin Win32 API output ----
       System Error Code: 1332
       System Error Message: No mapping between account names and security IDs was done.
       ---- End Win32 API output ----
       