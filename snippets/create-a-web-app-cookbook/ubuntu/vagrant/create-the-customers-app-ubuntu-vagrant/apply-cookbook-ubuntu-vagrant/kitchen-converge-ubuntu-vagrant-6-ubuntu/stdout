-----> Starting Kitchen (v1.15.0)
-----> Converging <default-ubuntu-1404>...
       Preparing files for transfer
       Preparing dna.json
       Resolving cookbook dependencies with Berkshelf 5.6.0...
       Removing non-cookbook files before transfer
       Preparing data_bags
       Preparing validation.pem
       Preparing client.rb
-----> Chef Omnibus installation detected (install only if missing)
       Transferring files to <default-ubuntu-1404>
       [2017-03-30T20:31:52+00:00] INFO: Forking chef instance to converge...
       Starting Chef Client, version 12.19.36
       [2017-03-30T20:31:52+00:00] INFO: *** Chef 12.19.36 ***
       [2017-03-30T20:31:52+00:00] INFO: Platform: x86_64-linux
       [2017-03-30T20:31:52+00:00] INFO: Chef-client pid: 18581
       [2017-03-30T20:31:53+00:00] INFO: Setting the run_list to ["recipe[lamp_customers::default]"] from CLI options
       [2017-03-30T20:31:53+00:00] INFO: Run List is [recipe[lamp_customers::default]]
       [2017-03-30T20:31:53+00:00] INFO: Run List expands to [lamp_customers::default]
       [2017-03-30T20:31:53+00:00] INFO: Starting Chef Run for default-ubuntu-1404
       [2017-03-30T20:31:53+00:00] INFO: Running start handlers
       [2017-03-30T20:31:53+00:00] INFO: Start handlers complete.
       [2017-03-30T20:31:53+00:00] INFO: HTTP Request Returned 404 Not Found: Object not found: 
       resolving cookbooks for run list: ["lamp_customers::default"]
       [2017-03-30T20:31:54+00:00] INFO: Loading cookbooks [lamp_customers@0.1.0, lamp@0.1.0, httpd@0.4.5, mysql@8.3.0, mysql2_chef_gem@1.1.0, database@6.1.1, compat_resource@12.16.3, build-essential@8.0.0, mariadb@1.3.0, postgresql@6.1.1, seven_zip@2.0.2, mingw@2.0.0, apt@6.0.1, yum@5.0.0, yum-epel@2.1.1, yum-scl@0.2.0, openssl@7.0.1, windows@3.0.4, inifile_chef_gem@0.1.0, ohai@5.0.2]
       Synchronizing Cookbooks:
       [2017-03-30T20:31:54+00:00] INFO: Storing updated cookbooks/lamp_customers/attributes/default.rb in the cache.
       [2017-03-30T20:31:54+00:00] INFO: Storing updated cookbooks/lamp_customers/files/default/create-tables.sql in the cache.
       [2017-03-30T20:31:54+00:00] INFO: Storing updated cookbooks/lamp_customers/recipes/default.rb in the cache.
       [2017-03-30T20:31:54+00:00] INFO: Storing updated cookbooks/lamp_customers/templates/index.php.erb in the cache.
         - lamp_customers (0.1.0)
         - lamp (0.1.0)
         - httpd (0.4.5)
         - mysql (8.3.0)
         - mysql2_chef_gem (1.1.0)
         - database (6.1.1)
         - compat_resource (12.16.3)
         - build-essential (8.0.0)
         - mariadb (1.3.0)
         - postgresql (6.1.1)
         - seven_zip (2.0.2)
         - mingw (2.0.0)
         - apt (6.0.1)
         - yum (5.0.0)
         - yum-scl (0.2.0)
         - yum-epel (2.1.1)
         - inifile_chef_gem (0.1.0)
         - ohai (5.0.2)
         - openssl (7.0.1)
         - windows (3.0.4)
       Installing Cookbook Gems:
       Compiling Cookbooks...
       Converging 14 resources
       Recipe: lamp::default
         * apt_update[daily] action periodic[2017-03-30T20:31:54+00:00] INFO: Processing apt_update[daily] action periodic (lamp::default line 1)
        (up to date)
       Recipe: lamp::web
         * directory[/var/www/customers/public_html] action create[2017-03-30T20:31:54+00:00] INFO: Processing directory[/var/www/customers/public_html] action create (lamp::web line 2)
       [2017-03-30T20:31:54+00:00] INFO: directory[/var/www/customers/public_html] created directory /var/www/customers/public_html
       
           - create new directory /var/www/customers/public_html
         * httpd_config_debian[default] action create[2017-03-30T20:31:54+00:00] INFO: Processing httpd_config_debian[default] action create (lamp::web line 7)
       
           * directory[/etc/apache2-default/conf-available] action create[2017-03-30T20:31:54+00:00] INFO: Processing directory[/etc/apache2-default/conf-available] action create (/tmp/kitchen/cache/cookbooks/httpd/libraries/httpd_config_debian.rb line 26)
        (up to date)
           * template[/etc/apache2-default/conf-available/default.conf] action create[2017-03-30T20:31:54+00:00] INFO: Processing template[/etc/apache2-default/conf-available/default.conf] action create (/tmp/kitchen/cache/cookbooks/httpd/libraries/httpd_config_debian.rb line 34)
       [2017-03-30T20:31:54+00:00] INFO: template[/etc/apache2-default/conf-available/default.conf] backed up to /tmp/kitchen/backup/etc/apache2-default/conf-available/default.conf.chef-20170330203154.761420
       [2017-03-30T20:31:54+00:00] INFO: template[/etc/apache2-default/conf-available/default.conf] updated file contents /etc/apache2-default/conf-available/default.conf
       
             - update content in file /etc/apache2-default/conf-available/default.conf from 008624 to 6a5c40
             --- /etc/apache2-default/conf-available/default.conf	2017-03-30 20:27:31.160119013 +0000
             +++ /etc/apache2-default/conf-available/.chef-default20170330-18581-fypn6u.conf	2017-03-30 20:31:54.754021020 +0000
             @@ -2,12 +2,12 @@
         ServerName default-ubuntu-1404
         ServerAdmin 'ops@example.com'
       
             -  DocumentRoot /var/www/default/public_html
             +  DocumentRoot /var/www/customers/public_html
         <Directory "/">
                 Options FollowSymLinks
                 AllowOverride None
         </Directory>
             -  <Directory /var/www/default/public_html >
             +  <Directory /var/www/customers/public_html >
                 Options Indexes FollowSymLinks MultiViews
                 AllowOverride None
                 Require all granted
           * directory[/etc/apache2-default/conf-enabled] action create[2017-03-30T20:31:54+00:00] INFO: Processing directory[/etc/apache2-default/conf-enabled] action create (/tmp/kitchen/cache/cookbooks/httpd/libraries/httpd_config_debian.rb line 44)
        (up to date)
           * link[/etc/apache2-default/conf-enabled/default.conf] action create[2017-03-30T20:31:54+00:00] INFO: Processing link[/etc/apache2-default/conf-enabled/default.conf] action create (/tmp/kitchen/cache/cookbooks/httpd/libraries/httpd_config_debian.rb line 52)
        (up to date)
         
         * httpd_service_debian_sysvinit[default] action create[2017-03-30T20:31:54+00:00] INFO: Processing httpd_service_debian_sysvinit[default] action create (lamp::web line 12)
       
           * apt_package[apache2] action install[2017-03-30T20:31:54+00:00] INFO: Processing apt_package[apache2] action install (/tmp/kitchen/cache/cookbooks/httpd/libraries/httpd_service_debian.rb line 8)
        (up to date)
           * service[apache2] action stop[2017-03-30T20:31:54+00:00] INFO: Processing service[apache2] action stop (/tmp/kitchen/cache/cookbooks/httpd/libraries/httpd_service_debian_sysvinit.rb line 52)
        (up to date)
           * service[apache2] action disable[2017-03-30T20:31:54+00:00] INFO: Processing service[apache2] action disable (/tmp/kitchen/cache/cookbooks/httpd/libraries/httpd_service_debian_sysvinit.rb line 52)
        (up to date)
[...]
           +++ /var/www/customers/public_html/.chef-index20170330-18581-1dw7dyb.php	2017-03-30 20:31:57.307297019 +0000
           @@ -1 +1,56 @@
           +<!DOCTYPE html>
           +<html lang="en">
           +<head>
           +    <title>Customers</title>
           +    <style>
           +      table, th, td {
           +        border: 1px solid black;
           +        border-collapse: collapse;
           +        font-family: sans-serif;
           +        padding: 5px;
           +      }
           +      table tr:nth-child(even) td {
           +        background-color: #95c7ea;
           +      }
           +    </style>
           +</head>
           +<body>
           +<?php
           +$servername = "";
           +$username = "db_admin";
           +$password = "fakeadminpassword";
           +$dbname = "4thcoffee";
           +
           +// Create connection
           +$conn = new mysqli($servername, $username, $password, $dbname);
           +
           +// Check connection
           +if ($conn->connect_error) {
           +    die("Connection failed: " . $conn->connect_error);
           +}
           +
           +// Perform SQL query
           +$sql = "SELECT * FROM customers";
           +$result = $conn->query($sql);
           +
           +if ($result->num_rows > 0) {
           +    echo "<table>\n";
           +    // Output data of each row
           +    while($row = $result->fetch_assoc()) {
           +      echo "\t<tr>\n";
           +      foreach ($row as $col_value) {
           +          print "\t\t<td>$col_value</td>\n";
           +      }
           +      echo "\t</tr>\n";
           +    }
           +    echo "</table>";
           +} else {
           +    echo "0 results";
           +}
           +
           +// Close connection
           +$conn->close();
           +?>
           +</body>
           +</html>
       [2017-03-30T20:31:57+00:00] INFO: httpd_config[default] sending restart action to httpd_service_debian_sysvinit[default] (delayed)
       Recipe: lamp::web
         * httpd_service_debian_sysvinit[default] action restart[2017-03-30T20:31:57+00:00] INFO: Processing httpd_service_debian_sysvinit[default] action restart (lamp::web line 12)
       
           * service[apache2-default] action restart[2017-03-30T20:31:57+00:00] INFO: Processing service[apache2-default] action restart (/tmp/kitchen/cache/cookbooks/httpd/libraries/httpd_service_debian_sysvinit.rb line 35)
       [2017-03-30T20:31:59+00:00] INFO: service[apache2-default] restarted
       
             - restart service service[apache2-default]
         
       [2017-03-30T20:31:59+00:00] INFO: Chef Run complete in 5.640906508 seconds
       
       Running handlers:
       [2017-03-30T20:31:59+00:00] INFO: Running report handlers
       Running handlers complete
       [2017-03-30T20:31:59+00:00] INFO: Report handlers complete
       
       Deprecated features used!
         Chef::Platform.set is deprecated at 14 locations:
           - /tmp/kitchen/cache/cookbooks/mysql2_chef_gem/libraries/z_provider_mapping.rb:4:in `<top (required)>'
           - /tmp/kitchen/cache/cookbooks/mysql2_chef_gem/libraries/z_provider_mapping.rb:5:in `<top (required)>'
           - /tmp/kitchen/cache/cookbooks/mysql2_chef_gem/libraries/z_provider_mapping.rb:6:in `<top (required)>'
           - /tmp/kitchen/cache/cookbooks/mysql2_chef_gem/libraries/z_provider_mapping.rb:7:in `<top (required)>'
           - /tmp/kitchen/cache/cookbooks/mysql2_chef_gem/libraries/z_provider_mapping.rb:8:in `<top (required)>'
           - /tmp/kitchen/cache/cookbooks/mysql2_chef_gem/libraries/z_provider_mapping.rb:9:in `<top (required)>'
           - /tmp/kitchen/cache/cookbooks/mysql2_chef_gem/libraries/z_provider_mapping.rb:10:in `<top (required)>'
           - /tmp/kitchen/cache/cookbooks/mysql2_chef_gem/libraries/z_provider_mapping.rb:11:in `<top (required)>'
           - /tmp/kitchen/cache/cookbooks/mysql2_chef_gem/libraries/z_provider_mapping.rb:12:in `<top (required)>'
           - /tmp/kitchen/cache/cookbooks/mysql2_chef_gem/libraries/z_provider_mapping.rb:13:in `<top (required)>'
           - /tmp/kitchen/cache/cookbooks/mysql2_chef_gem/libraries/z_provider_mapping.rb:14:in `<top (required)>'
           - /tmp/kitchen/cache/cookbooks/mysql2_chef_gem/libraries/z_provider_mapping.rb:15:in `<top (required)>'
           - /tmp/kitchen/cache/cookbooks/mysql2_chef_gem/libraries/z_provider_mapping.rb:16:in `<top (required)>'
           - /tmp/kitchen/cache/cookbooks/mysql2_chef_gem/libraries/z_provider_mapping.rb:17:in `<top (required)>'
          See https://docs.chef.io/deprecations_chef_platform_methods.html for further details.
         Chef::Platform.find_provider_for_node is deprecated at 1 location:
           - /opt/chef/embedded/lib/ruby/2.3.0/forwardable.rb:189:in `execute_each_resource'
          See https://docs.chef.io/deprecations_chef_platform_methods.html for further details.
         Chef::Platform.find_provider is deprecated at 1 location:
           - /opt/chef/embedded/lib/ruby/2.3.0/forwardable.rb:189:in `execute_each_resource'
          See https://docs.chef.io/deprecations_chef_platform_methods.html for further details.
         Chef::Platform.find is deprecated at 1 location:
           - /opt/chef/embedded/lib/ruby/2.3.0/forwardable.rb:189:in `execute_each_resource'
          See https://docs.chef.io/deprecations_chef_platform_methods.html for further details.
         nil is an invalid value for version of resource . In Chef 13, this warning will change to an error. Error: Property version must be one of: String!  You passed nil. at 1 location:
           - /tmp/kitchen/cache/cookbooks/mysql2_chef_gem/libraries/provider_mysql2_chef_gem_mysql.rb:17:in `block (2 levels) in <class:Mysql>'
          See https://docs.chef.io/deprecations_custom_resource_cleanups.html for further details.
       
       Chef Client finished, 10/209 resources updated in 07 seconds
       Finished converging <default-ubuntu-1404> (0m34.58s).
-----> Kitchen is finished. (0m35.51s)